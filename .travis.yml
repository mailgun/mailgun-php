language: php

php:
  - 5.5
  - 5.6
  - 7.0
  - hhvm

before_install:
  - travis_retry composer self-update

install:
  - travis_retry composer install
  - travis_retry composer require --dev 'phpunit/php-code-coverage=^2.2.4'

script:
  - phpunit -c phpunit.xml.dist --testsuite unit --coverage-text
  - phpunit -c phpunit.xml.dist --testsuite functional --coverage-text
  - '[[ "${TRAVIS_PULL_REQUEST}" == "false" ]] && ( phpunit -c phpunit.xml.dist --testsuite integration --coverage-text ) || ( echo "Testing PR - No integration tests available")'
